<div id="<%= dom_id article %>">

  <div class="card mb-1 mx-0 px-0">
  
    <div class="card-header">
      <% if article.image.attached? %>
        <div class="d-flex justify-content-center mb-1">
          <%= image_tag article.image, class: "img-fluid", style: "max-width: 600px; max-height: 300px; width: 100%; height: auto;" %>
        </div>
      <% end %>

      <div class="flex-grow-1 ms-2"> 
          <strong>Artículo creado por</strong> <%= article.user.name %> <strong> el día </strong> <%= article.created_at.strftime("%d-%m-%Y %H:%M") %> <strong> en </strong> <%= article.location %>
      </div>

    </div>

    <div class="card-body">
      <h5 class="card-title mb-2"> <%= article.title %> </h5>
      <p class="card-text"> <%= article.description %> </p>

      <div class="d-flex justify-content-start align-items-center mb-2"> 
        <% if controller_name == "articles" %>
          <% if action_name == "index" %>

              <%= link_to "Ver artículo ", article, class: "btn btn-primary me-3" %>
              <span class="btn-success"> 
                  <strong> Comentarios asociados </strong> <span class="top-0 badge rounded-pill bg-danger"> + <%= article.comments.count %> </span>
              </span>

          <% elsif action_name == "show" %>

              <% if user_signed_in? %>
                  <% if article.user_id == current_user.id %>
                      <%= button_to "Eliminar artículo", @article, method: :delete, data: { confirm: "¿Está seguro?" }, class: "col-3 col-md-1  py-2 btn btn-warning", style:"width: 200px" %>
                  <% end %>
              <% end %>

          <% end %>
        <% end%>
      </div>

      <br> 
      <div class="d-flex justify-content-between align-items-center mb-2"> 
        <%= button_to "<i class='mb-3 me-2 fa-regular fa-face-smile fa-2xl reaccion-n'></i>".html_safe + "<span class='me-2 badge rounded-pill bg-primary'>#{article.reactions.where(kind: "like").count}</span>".html_safe, 
        new_user_reaction_path(article_id: article.id, reaction_type: "article", kind: "like"), 
        method: :post, 
        class: "btn btn-light w-100" %>

        <%= button_to "<i class='mb-3 me-2 fa-regular fa-face-frown fa-2xl reaccion-n me-sm-2'></i>".html_safe + "<span class='me-2 badge rounded-pill bg-primary'>#{article.reactions.where(kind: "dislike").count}</span>".html_safe, 
        new_user_reaction_path(article_id: article.id, reaction_type: "article", kind: "dislike"), 
        method: :post, 
        class: "btn btn-light w-100" %>

        <%= button_to "<i class='mb-3 me-2 fa-regular fa-face-rolling-eyes fa-2xl reaccion-n me-sm-2'></i>".html_safe + "<span class='me-2 badge rounded-pill bg-primary'>#{article.reactions.where(kind: "not_interested").count}</span>".html_safe, 
        new_user_reaction_path(article_id: article.id, reaction_type: "article", kind: "not_interested"), 
        method: :post, 
        class: "btn btn-light w-100" %>

        <%= button_to "<i class='mb-3 me-2 fa-regular fa-face-meh  fa-2xl reaccion-n me-sm-2'></i>".html_safe + "<span class='me-2 badge rounded-pill bg-primary'>#{article.reactions.where(kind: "neutral").count}</span>".html_safe, 
        new_user_reaction_path(article_id: article.id, reaction_type: "article", kind: "neutral"), 
        method: :post, 
        class: "btn btn-light w-100" %>
      </div>

    </div>

  </div>

</div>
